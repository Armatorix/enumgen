// DO NOT EDIT: auto generated from github.com/Armatorix/enumgen

package {{ .PackageName }}

func (e {{ .EnumName }}) String() string {
    switch e {
    {{ range .Values }}case {{ . }}:
        return "{{ . }}"
    {{ end }}default:
        return "Unknown"
    }
}

func (e {{ .EnumName }}) MarshalJSON() ([]byte, error) {
    return json.Marshal(e.String())
}

func (e *{{ .EnumName }}) UnmarshalJSON(data []byte) error {
    var s string
    if err := json.Unmarshal(data, &s); err != nil {
        return err
    }
    switch s {
    {{ range .Values }}case "{{ . }}":
        *e = {{ . }}
    {{ end }}default:
        return fmt.Errorf("Unknown {{ .EnumName }} value: %+v", s)
    }
    return nil
}

func {{ .EnumName}}Values() []{{ .EnumName }} {
    return []{{ .EnumName }}{
    {{ range .Values }}{{ . }},
    {{ end }}
    }
}

func (e {{ .EnumName }}) IsValid() bool {
    switch e {
    {{ range .Values }}case {{ . }}:
        return true
    {{ end }}default:
        return false
    }
}

// valuer and scanner for database/sql

func (e {{ .EnumName }}) Value() (driver.Value, error) {
    return e.String(), nil
}

var ErrMissingValue = errors.New("missing value")

func (e *{{ .EnumName }}) Scan(value interface{}) error {
    if value == nil {
        return ErrMissingValue
    }
    switch v := value.(type) {
    case []byte:
        return e.UnmarshalJSON(v)
    case string:
        return e.UnmarshalJSON([]byte(v))
    case int64:
        *e, ok = {{ .EnumName }}(v)
        if !ok {
            return fmt.Errorf("Unknown {{ .EnumName }} value: %+v", v)
        }
        return nil
    
    default:
        return fmt.Errorf("Unsupported type: %T", v)
    }
}
`